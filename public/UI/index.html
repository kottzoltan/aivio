<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <title>AIVIO – AI ügynökök demó</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 40px;
    }

    h1 {
      margin-bottom: 8px;
    }

    p {
      opacity: 0.8;
      margin-bottom: 32px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 24px;
    }

    .card {
      background: #111827;
      border-radius: 16px;
      padding: 20px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }

    .card img {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .card h3 {
      margin: 0 0 6px 0;
    }

    .card span {
      font-size: 14px;
      opacity: 0.7;
    }

    #status {
      margin-top: 24px;
      font-size: 14px;
      opacity: 0.8;
    }
  </style>
</head>

<body>

  <h1>AIVIO – AI ügynök demók</h1>
  <p>Kattints egy ügynökre, és hallgasd meg, hogyan dolgozik.</p>

  <div class="grid">

    <div class="card" onclick="runAgent('Kimenő sales telefon')">
      <img src="/img/outbound-sales-call.png">
      <h3>Kimenő sales ügynök</h3>
      <span>Telefonos értékesítés</span>
    </div>

    <div class="card" onclick="runAgent('Kimenő sales email')">
      <img src="/img/outbound-email.png">
      <h3>Email sales ügynök</h3>
      <span>Emailes megkeresések</span>
    </div>

    <div class="card" onclick="runAgent('Bejövő ügyfélszolgálat')">
      <img src="/img/inbound-support.png">
      <h3>Bejövő ügyfélszolgálat</h3>
      <span>Telefonos támogatás</span>
    </div>

    <div class="card" onclick="runAgent('Partneri adatgyűjtés')">
      <img src="/img/data-collection.png">
      <h3>Partneri adatgyűjtő</h3>
      <span>Visszahívással, határidőkkel</span>
    </div>

  </div>

  <div id="status"></div>

<script>
async function runAgent(type) {
  const status = document.getElementById("status");
  status.innerText = "⏳ AI gondolkodik és beszél…";

  try {
    // 1️⃣ AI válasz
    const aiRes = await fetch("/ai", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        message: `${type} – mutatkozz be egy rövid demó szöveggel`
      })
    });

    const aiData = await aiRes.json();

    // 2️⃣ Beszéd
    const speakRes = await fetch("/speak", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        text: aiData.reply
      })
    });

    const audioBlob = await speakRes.blob();
    const audio = new Audio(URL.createObjectURL(audioBlob));
    audio.play();

    status.innerText = "▶️ Lejátszás…";

  } catch (e) {
    status.innerText = "❌ Hiba történt";
  }
}
</script>

</body>
</html>
